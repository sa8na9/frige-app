{% extends "base.html" %}

{% block title %}èª¿å‘³æ–™ä¸€è¦§ - å†·è”µåº«ç®¡ç†ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}
<div class="items-page">
    <header class="page-header">
        <h1>å†·è”µåº«ç®¡ç†ã‚¢ãƒ—ãƒª</h1>
        <div style="display: flex; gap: 10px;">
            <a href="{{ url_for('shopping_list') }}" class="btn btn-icon">ğŸ›’ è²·ã„ç‰©ãƒªã‚¹ãƒˆ</a>
            <a href="{{ url_for('share_settings') }}" class="btn btn-icon">âš™ï¸ å…±æœ‰è¨­å®š</a>
        </div>
    </header>
    
    <div class="toolbar">
        <div class="sort-buttons">
            <a href="{{ url_for('items_list', sort='expiry') }}" 
               class="btn btn-small {% if current_sort == 'expiry' %}btn-active{% endif %}">
                æœŸé™é † â–¼
            </a>
            <a href="{{ url_for('items_list', sort='quantity') }}" 
               class="btn btn-small {% if current_sort == 'quantity' %}btn-active{% endif %}">
                æ®‹é‡é † â–¼
            </a>
        </div>
        <a href="{{ url_for('register') }}" class="btn btn-primary">+ æ–°è¦ç™»éŒ²</a>
    </div>
    
    <div class="items-list">
        {% if items %}
            {% for item in items %}
            <div class="item-card">
                <div class="item-header">
                    <h3>{{ item.name }} <span class="container-type">({{ item.container_type_text }})</span></h3>
                </div>
                
                <div class="item-info">
                    {% if item.opened_date %}
                    <p class="item-dates">
                        <span class="date-label">é–‹å°:</span> {{ item.opened_date }}
                        <span class="date-separator">|</span>
                        <span class="days-since-open {{ item.days_since_open_class }}">
                            é–‹å°ã‹ã‚‰{{ item.days_since_open }}æ—¥çµŒé
                        </span>
                    </p>
                    {% endif %}
                    <p class="expiry-date {{ item.expiry_class }}">
                        è³å‘³æœŸé™: 
                        {% if item.expiry_date %}
                            {{ item.expiry_date }}
                            {% if item.expiry_icon %}
                                <span class="icon">{{ item.expiry_icon }}</span>
                            {% endif %}
                        {% else %}
                            æœªè¨­å®š
                        {% endif %}
                    </p>
                    {% if item.memo %}
                    <p class="item-memo">
                        <span class="memo-icon">ğŸ“</span> {{ item.memo }}
                    </p>
                    {% endif %}
                </div>
                
                <div class="quantity-selector">
                    <span>æ®‹é‡:</span>
                    <form method="POST" action="{{ url_for('update_quantity', item_id=item.id, new_level=1) }}" style="display: inline;">
                        <button type="submit" class="qty-btn {% if item.quantity_level == 1 %}active level-1{% endif %}">æº€</button>
                    </form>
                    <form method="POST" action="{{ url_for('update_quantity', item_id=item.id, new_level=2) }}" style="display: inline;">
                        <button type="submit" class="qty-btn {% if item.quantity_level == 2 %}active level-2{% endif %}">åŠ</button>
                    </form>
                    <form method="POST" action="{{ url_for('update_quantity', item_id=item.id, new_level=3) }}" style="display: inline;">
                        <button type="submit" class="qty-btn {% if item.quantity_level == 3 %}active level-3{% endif %}">å°‘</button>
                    </form>
                    <form method="POST" action="{{ url_for('update_quantity', item_id=item.id, new_level=4) }}" style="display: inline;">
                        <button type="submit" class="qty-btn {% if item.quantity_level == 4 %}active level-4{% endif %}">ç„¡</button>
                    </form>
                </div>
                
                <div class="item-actions">
                    {% if item.quantity_level == 4 %}
                    <form method="POST" action="{{ url_for('add_to_shopping_list', item_id=item.id) }}" style="display: inline;" onsubmit="return confirm('è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ');">
                        <button type="submit" class="btn btn-small" style="background-color: #3498db; color: white;">ğŸ›’ ãƒªã‚¹ãƒˆã«è¿½åŠ </button>
                    </form>
                    {% endif %}
                    <a href="{{ url_for('edit', item_id=item.id) }}" class="btn btn-small">ç·¨é›†</a>
                    <form method="POST" action="{{ url_for('delete_item', item_id=item.id) }}" style="display: inline;" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹?');">
                        <button type="submit" class="btn btn-small btn-danger">å‰Šé™¤</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="no-items">èª¿å‘³æ–™ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚[+ æ–°è¦ç™»éŒ²]ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>
        {% endif %}
    </div>



</div>
{% endblock %}