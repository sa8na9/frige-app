{% extends "base.html" %}

{% block title %}è²·ã„ç‰©ãƒªã‚¹ãƒˆ - å†·è”µåº«ç®¡ç†ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}
<div class="shopping-list-page">
    <header class="page-header">
        <h1>ğŸ›’ è²·ã„ç‰©ãƒªã‚¹ãƒˆ</h1>
        <div style="display: flex; gap: 10px;">
            <a href="{{ url_for('add_shopping_manual') }}" class="btn btn-primary">+ æ‰‹å‹•ã§è¿½åŠ </a>
            <a href="{{ url_for('items_list') }}" class="btn btn-secondary">èª¿å‘³æ–™ä¸€è¦§ã«æˆ»ã‚‹</a>
        </div>
    </header>
    
    {% if items %}
    <div class="shopping-items-container">
        {% for item in items %}
        <div class="shopping-card {% if item.is_checked %}checked{% endif %}">
            <div class="shopping-check">
                <form method="POST" action="{{ url_for('toggle_shopping_check', shopping_id=item.id) }}" style="display: inline;">
                    <button type="submit" class="check-btn">
                        {% if item.is_checked %}
                            âœ“
                        {% else %}
                            â—‹
                        {% endif %}
                    </button>
                </form>
            </div>
            
            <div class="shopping-info">
                <h3>{{ item.item_name }}</h3>
                <p class="shopping-type">{{ item.container_type_text }}</p>
                {% if item.memo %}
                <p class="shopping-memo">ğŸ“ {{ item.memo }}</p>
                {% endif %}
            </div>
            
            <div class="shopping-actions">
                <a href="{{ url_for('purchase_from_list', shopping_id=item.id) }}" class="btn btn-small btn-primary">è³¼å…¥ã—ã¦ç™»éŒ²</a>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="shopping-footer">
        <form method="POST" action="{{ url_for('finish_shopping') }}" onsubmit="return confirm('ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
            <button type="submit" class="btn btn-danger">è²·ã„ç‰©çµ‚äº†ï¼ˆãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã‚’å‰Šé™¤ï¼‰</button>
        </form>
    </div>
    {% else %}
    <p class="no-items">è²·ã„ç‰©ãƒªã‚¹ãƒˆã¯ç©ºã§ã™ã€‚</p>
    <p style="text-align: center; color: #888; font-size: 14px;">
        èª¿å‘³æ–™ä¸€è¦§ã§æ®‹é‡ã€Œç„¡ã€ã®ã‚¢ã‚¤ãƒ†ãƒ ã‹ã‚‰è¿½åŠ ã§ãã¾ã™ã€‚
    </p>
    {% endif %}
</div>
{% endblock %}